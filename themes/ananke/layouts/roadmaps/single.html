{{ define "header" }}
  {{ partial "page-header.html" . }}
{{ end }}

{{ define "main" }}
  {{ $section := .Site.GetPage "section" .Section }}
  <article class="fade-in settle-up flex-l flex-wrap justify-between mw8 center ph3 roadmap-article">
    <header class="mt4 w-100">
      <h1 class="f1 mt3 mb1" id="title">
        {{- .Title -}}
      </h1>
      {{ with .Params.author | default .Site.Params.author }}
        <p class="tracked">
          {{ $.Render "by" }} <strong>
            {{- if reflect.IsSlice . -}}
              {{ delimit . ", " | markdownify }}
            {{- else -}}
              {{ . | markdownify }}
            {{- end -}}
          </strong>
        </p>
      {{ end }}

      {{ if not .Date.IsZero }}
        <time class="f6 mv4 dib tracked" {{ printf `datetime="%s"` (.Date.Format "2006-01-02T15:04:05Z07:00") | safeHTMLAttr }}>
          {{- .Date | time.Format (default "January 2, 2006" .Site.Params.date_format) -}}
        </time>
      {{ end }}

      {{ if (or (eq (.Param "show_reading_time") true) (eq $section.Params.show_reading_time true)) }}
        <span class="f6 mv4 dib tracked"> - {{ i18n "readingTime" .ReadingTime }} </span>
        <span class="f6 mv4 dib tracked"> - {{ i18n "wordCount" .WordCount }} </span>
      {{ end }}
    </header>

    <div id="post-content-div" class="glass-card roadmap-content">
      {{- .Content -}}
      {{- partial "tags.html" . -}}
      <div class="instapaper_ignoref">
        {{ if .Site.Config.Services.Disqus.Shortname }}
          {{ template "_internal/disqus.html" . }}
        {{ end }}
        {{ if .Site.Params.commentoEnable }}
          {{- partial "commento.html" . -}}
        {{ end }}
      </div>
    </div>

    <aside class="w-30-l mt6-l">
      {{- partial "menu-contextual.html" . -}}
    </aside>

    <style>
      .roadmap-article {
        gap: 1.5rem;
      }

      .roadmap-content {
        line-height: 1.7;
        width: 100%;
        position: relative;
        padding-left: 34px;
      }

      .roadmap-content > * + * {
        margin-top: 1.2rem;
      }

      .roadmap-content h2,
      .roadmap-content h3,
      .roadmap-content h4 {
        margin-top: 2.5rem;
        margin-bottom: 0.75rem;
        padding-bottom: 0.4rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.12);
        letter-spacing: 0.01em;
        position: relative;
        padding-left: 12px;
      }

      .roadmap-content p,
      .roadmap-content li {
        font-size: 1.15rem;
        color: var(--foreground-primary);
      }

      .roadmap-content ul,
      .roadmap-content ol {
        padding-left: 1.6rem;
        display: grid;
        gap: 0.55rem;
      }

      .roadmap-content li::marker {
        color: var(--foreground-link);
      }

      .roadmap-content::before {
        content: "";
        position: absolute;
        left: 12px;
        top: 12px;
        bottom: 12px;
        width: 2px;
        background: rgba(48, 129, 216, 0.35);
        border-radius: 2px;
      }

      .roadmap-content h2::before,
      .roadmap-content h3::before,
      .roadmap-content h4::before {
        content: "";
        position: absolute;
        left: -26px;
        top: 43%;
        transform: translateY(-50%);
        width: 13px;
        height: 13px;
        border-radius: 999px;
        background: var(--foreground-link);
        box-shadow: 0 0 0 4px rgba(48, 129, 216, 0.18);
      }

      .roadmap-content table {
        width: 100%;
        border-collapse: collapse;
        border-spacing: 0;
        margin: 1.6rem 0;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.3);
        overflow: hidden;
      }

      .roadmap-content thead {
        background: rgba(255, 255, 255, 0.18);
      }

      .roadmap-content th,
      .roadmap-content td {
        padding: 1rem 1.25rem;
        border: 1px solid rgba(255, 255, 255, 0.3);
        text-align: left;
        min-width: 140px;
      }

      .roadmap-content tr:nth-child(even) td {
        background: rgba(255, 255, 255, 0.07);
      }

      .roadmap-content blockquote {
        border-left: 4px solid var(--foreground-link);
        padding-left: 1rem;
        color: var(--foreground-primary);
        background: rgba(255, 255, 255, 0.04);
      }

      .roadmap-content hr {
        border: none;
        border-bottom: 1px solid rgba(255, 255, 255, 0.12);
        margin: 2rem 0;
      }

      .roadmap-content img {
        max-width: 100%;
        height: auto;
        display: block;
        border-radius: 12px;
      }

      .roadmap-content code {
        background: rgba(255, 255, 255, 0.08);
        padding: 0.15rem 0.35rem;
        border-radius: 6px;
      }

      @media only screen and (max-width: 1000px) {
        #title {
          padding: 0 !important;
        }

        .roadmap-content {
          padding: 1.5rem;
          padding-left: 30px;
        }

        .roadmap-content table {
          display: block;
          overflow-x: auto;
          overflow-y: hidden;
        }

        .roadmap-content::before {
          left: 10px;
        }

        .roadmap-content h2::before,
        .roadmap-content h3::before,
        .roadmap-content h4::before {
          left: -24px;
        }
      }
    </style>
  </article>
{{ end }}
